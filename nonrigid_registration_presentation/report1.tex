\documentclass[11pt,a4paper,oneside]{report}


\usepackage{amssymb,calc,ifthen}

\usepackage{float}
%\usepackage{cancel}

\usepackage[table,usenames,dvipsnames]{xcolor} % for coloured cells in tables

\usepackage{tikz}

% Allows us to click on links and references!

\usepackage{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}

% Nice package for plotting graphs
% See excellent guide:
% http://www.tug.org/TUGboat/tb31-1/tb97wright-pgfplots.pdf
\usetikzlibrary{plotmarks}
\usepackage{graphicx}
\usepackage[fleqn]{amsmath}
% \usepackage{epstopdf}
\usepackage{caption}
\usepackage{subcaption}

% highlight - useful for TODOs and similar
\usepackage{color}
\newcommand{\hilight}[1]{\colorbox{yellow}{#1}}

\newcommand\ci{\perp\!\!\!\perp} % perpendicular sign
\newcommand*\rfrac[2]{{}^{#1}\!/_{#2}} % diagonal fraction

\usepackage{listings}



% margin size
\usepackage[margin=1in]{geometry}

\tikzstyle{state}=[circle,thick,draw=black, align=center, minimum size=2.1cm,
inner sep=0]
\tikzstyle{vertex}=[circle,thick,draw=black]
\tikzstyle{terminal}=[rectangle,thick,draw=black]
\tikzstyle{edge} = [draw,thick]
\tikzstyle{lo} = [edge,dotted]
\tikzstyle{hi} = [edge]
\tikzstyle{trans} = [edge,->]


\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}

\lstset{ %
  backgroundcolor=\color{white},   % choose the background color; you must add 
%\usepackage{color} or \usepackage{xcolor}
  basicstyle=\footnotesize,        % the size of the fonts that are used for the 
%code
  breakatwhitespace=false,         % sets if automatic breaks should only happen 
%at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{mygreen},    % comment style
  deletekeywords={...},            % if you want to delete keywords from the 
%given language
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 
%8-bits encodings only, does not work with UTF-8
  frame=single,                    % adds a frame around the code
  keepspaces=true,                 % keeps spaces in text, useful for keeping 
%indentation of code (possibly needs columns=flexible)
  keywordstyle=\color{blue},       % keyword style
  language=Octave,                 % the language of the code
  morekeywords={*,...},            % if you want to add more keywords to the set
  numbers=left,                    % where to put the line-numbers; possible 
%values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
  rulecolor=\color{black},         % if not set, the frame-color may be changed 
%on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular 
%underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular 
%underscores
  stepnumber=2,                    % the step between two line-numbers. If it's 
%1, each line will be numbered
  stringstyle=\color{mymauve},     % string literal style
  tabsize=2,                       % sets default tabsize to 2 spaces
  title=\lstname                   % show the filename of files included with 
%\lstinputlisting; also try caption instead of title
}


\title{Graphical Models Coursework 2}
\author{
    Razvan Valentin Marinescu\\
    Student Number: 14060166\\
  \texttt{razvan.marinescu.14@ucl.ac.uk}
  \and
    Konstantinos Georgiadis\\
    Student Number: 14110861\\
  \texttt{konstantinos.georgiadis.14@ucl.ac.uk}
}

\begin{document}
\belowdisplayskip=12pt plus 3pt minus 9pt
\belowdisplayshortskip=7pt plus 3pt minus 4pt

\maketitle{}

\section*{Contributions}

\begin{equation}
 T_{local}(x,y,z) = \sum_{l=0}^3\sum_{m=0}^3\sum_{n=0}^3B_{l}(u)B_{m}(v)B_{n}(w)\phi_{i+l,j+m,k+n}
\end{equation}
 
 
 \begin{gather*}
  B_0(u)=(1-u)^3/6\\
  B_1(u)=(3u^3-6u^2+4)/6\\
  B_2(u)=(-3u^3+3u^2+3u+1)/6\\
  B_3(u)=u^3/6\\
 \end{gather*}

 $$T_{local} (x,y,z) = \sum_{l=1}^L T_{local}^{l}(x,y,z) $$
 
 $$C_{smooth}=\frac{1}{V}\int_0^X\int_0^Y\int_0^Z\left[ \left(\frac{\partial^2T}{\partial x^2}\right)^2 + \left(\frac{\partial^2T}{\partial y^2}\right)^2 + \left(\frac{\partial^2T}{\partial z^2}\right)^2 + 2 \left(\frac{\partial^2T}{\partial xy}\right)^2 + 2 \left(\frac{\partial^2T}{\partial xz}\right)^2 + 2 \left(\frac{\partial^2T}{\partial yz}\right)^2 \right]dx\;dy\;dz$$
 
 $$C_{similarity}(A,B) = \frac{H(A) + H(B)}{H(A,B)} $$
 
 $$C(\Theta, \Phi)=-C_{similarity}(I(t_0), T(I(t))) + \lambda C_{smooth}(T)$$
 
 $$T(x,y,z)=T_{global}(x,y,z)+T_{local}(x,y,z)$$
 
 $$T_{global}(x,y,z)=\begin{pmatrix}
  \theta_{11}  & \theta_{12}  & \theta_{13} \\
  \theta_{21}  & \theta_{22}  & \theta_{23} \\
  \theta_{31}  & \theta_{32}  & \theta_{33}
 \end{pmatrix}\begin{pmatrix}
  x \\
  y \\
  z
 \end{pmatrix}+\begin{pmatrix}
  \theta_{14} \\
  \theta_{24} \\
  \theta_{34}
 \end{pmatrix}
 $$\\
 
 \begin{tabular}{ c | c | c | c | c }
 \hline
 \multicolumn{2}{c|}{Registration} &  \multicolumn{3}{|c}{Ranking}\\
 \hline
 $A$ & $B$ & $A < B$ & $A = B$ & $A > B$\\
  \hline
 Rigid & No registration & 78\% & 22\% & -\\
   \hline
 Affine & No registration & 84\% & 16\% & -\\
   \hline
 Affine + FFD & No registration & 94\% & 6\% & -\\
   \hline
 Affine & Rigid & 13\% & 78\% & 9\%\\
   \hline
 Affine + FFD & Rigid & 94\% & 6\% & -\\
   \hline
 Affine + FFD & Affine & 94\% & 6\% & -\\
   \hline
\end{tabular}\\\\


 \begin{tabular}{ c | c | c | c  }
 \hline
 Registration        &  SSD (mean) & SSD (variance) & CC\\
 \hline
 No registration     & 38.52& 53.90 & 0.8978\\
   \hline
 Rigid               & 23.63& 33.38 & 0.9604\\
   \hline
 Affine              & 21.38& 29.84 & 0.9689\\
   \hline
 Affine + FFD (20\textit{mm}) & 14.35& 23.43 & 0.9877\\
   \hline
 Affine + FFD (15\textit{mm}) & 13.28& 20.91 & 0.9895\\
   \hline
 Affine + FFD (10\textit{mm}) & 12.53& 19.25 & 0.9905\\
   \hline
\end{tabular}


 
\end{document}
